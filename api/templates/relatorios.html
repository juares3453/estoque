{% extends "base.html" %}

{% block title %}Relatórios - Estoque{% endblock %}

{% block content %}
<h1 class="mb-4 text-center">Relatórios do Estoque</h1>

<form method="GET" class="form-inline mb-3">
  <div class="form-group mr-2">
    <label for="grupo" class="mr-2">Grupo</label>
    <select name="grupo" id="grupo" class="form-control">
      <option value="">Todos</option>
      {% for g in grupos %}
      <option value="{{ g }}" {% if selected_grupo==g %}selected{% endif %}>{{ g }}</option>
      {% endfor %}
    </select>
  </div>
  <button type="submit" class="btn btn-primary mr-2">Gerar</button>
  <a href="/relatorios/export_excel?grupo={{ selected_grupo or '' }}" class="btn btn-success mr-2">Exportar Excel</a>
  <a href="/relatorios/export_pdf?grupo={{ selected_grupo or '' }}" class="btn btn-danger">Exportar PDF</a>
</form>

<div class="card">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-bordered mb-0">
        <thead class="thead-dark">
          <tr>
            <th>ID</th>
            <th>Código</th>
            <th>Nome</th>
            <th>Grupo</th>
            <th>Quantidade</th>
            <th>Descrição</th>
            <th>Preço</th>
          </tr>
        </thead>
        <tbody>
          {% for m in mercadorias %}
          <tr>
            <td>{{ m.id }}</td>
            <td>{{ m.codigo }}</td>
            <td>{{ m.nome }}</td>
            <td>{{ m.grupo }}</td>
            <td>{{ m.quantidade }}</td>
            <td>{{ m.descricao }}</td>
            <td>R$ {{ m.preco }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}
